----------------------------- REMOTE BUILD OUTPUT ------------------------------
starting build "ba81ff4c-285e-48fb-b62f-39f104e8ce15"
FETCHSOURCE
Fetching storage object: gs://run-sources-tagiangecolodge-asia-southeast1/services/ta-giang-ecolog/1771885588.633441-3d1e6e64c5a74dac91ef15c5efd12476.zip#1771885589367061
Copying gs://run-sources-tagiangecolodge-asia-southeast1/services/ta-giang-ecolog/1771885588.633441-3d1e6e64c5a74dac91ef15c5efd12476.zip#1771885589367061...
/ [0 files][    0.0 B/156.1 KiB]                                                / [1 files][156.1 KiB/156.1 KiB]
Operation completed over 1 objects/156.1 KiB.
Archive:  /tmp/source-archive.zip
   creating: /workspace/.vscode/
   creating: /workspace/app/
   creating: /workspace/components/
   creating: /workspace/lib/
   creating: /workspace/public/
   creating: /workspace/supabase/
   creating: /workspace/app/admin/
   creating: /workspace/app/api/
   creating: /workspace/app/blog/
   creating: /workspace/app/admin/(auth)/
   creating: /workspace/app/admin/(dashboard)/
   creating: /workspace/app/admin/(auth)/login/
   creating: /workspace/app/admin/(dashboard)/blog/
   creating: /workspace/app/admin/(dashboard)/bookings/
   creating: /workspace/app/admin/(dashboard)/gallery/
   creating: /workspace/app/admin/(dashboard)/landing/
   creating: /workspace/app/admin/(dashboard)/rooms/
   creating: /workspace/app/admin/(dashboard)/settings/
   creating: /workspace/app/admin/(dashboard)/blog/agent/
   creating: /workspace/app/api/auth/
   creating: /workspace/app/api/blog-agent/
   creating: /workspace/app/api/booking/
   creating: /workspace/app/api/site-data/
   creating: /workspace/app/api/auth/login/
   creating: /workspace/app/api/auth/logout/
   creating: /workspace/app/blog/[slug]/
   creating: /workspace/components/admin/
   creating: /workspace/components/landing/
   creating: /workspace/components/ui/
   creating: /workspace/lib/i18n/
   creating: /workspace/supabase/.temp/
   creating: /workspace/supabase/migrations/
  inflating: /workspace/.dockerignore
  inflating: /workspace/.env.example
  inflating: /workspace/.env.local.example
  inflating: /workspace/.env.production
  inflating: /workspace/build_error_log.txt
  inflating: /workspace/build_output.txt
  inflating: /workspace/deploy_log.txt
  inflating: /workspace/dev.log
  inflating: /workspace/dev_v2.log
  inflating: /workspace/dev_v3.log
  inflating: /workspace/Dockerfile
  inflating: /workspace/env.yaml
  inflating: /workspace/middleware.ts
  inflating: /workspace/next.config.mjs
  inflating: /workspace/package-lock.json
  inflating: /workspace/package.json
  inflating: /workspace/postcss.config.js
  inflating: /workspace/supabase_keys.txt
  inflating: /workspace/supabase_schema.sql
  inflating: /workspace/tailwind.config.ts
  inflating: /workspace/tsconfig.json
  inflating: /workspace/.vscode/settings.json
  inflating: /workspace/app/globals.css
  inflating: /workspace/app/icon.svg
  inflating: /workspace/app/layout.tsx
  inflating: /workspace/app/page.tsx
  inflating: /workspace/app/admin/layout.tsx
  inflating: /workspace/app/admin/(auth)/layout.tsx
  inflating: /workspace/app/admin/(auth)/login/page.tsx
  inflating: /workspace/app/admin/(dashboard)/layout.tsx
  inflating: /workspace/app/admin/(dashboard)/page.tsx
  inflating: /workspace/app/admin/(dashboard)/blog/page.tsx
  inflating: /workspace/app/admin/(dashboard)/blog/agent/page.tsx
  inflating: /workspace/app/admin/(dashboard)/bookings/page.tsx
  inflating: /workspace/app/admin/(dashboard)/gallery/page.tsx
  inflating: /workspace/app/admin/(dashboard)/landing/page.tsx
  inflating: /workspace/app/admin/(dashboard)/rooms/page.tsx
  inflating: /workspace/app/admin/(dashboard)/settings/page.tsx
  inflating: /workspace/app/api/auth/login/route.ts
  inflating: /workspace/app/api/auth/logout/route.ts
  inflating: /workspace/app/api/blog-agent/route.ts
  inflating: /workspace/app/api/booking/route.ts
  inflating: /workspace/app/api/site-data/route.ts
  inflating: /workspace/app/blog/page.tsx
  inflating: /workspace/app/blog/[slug]/page.tsx
  inflating: /workspace/components/StoreInitializer.tsx
  inflating: /workspace/components/admin/DashboardClient.tsx
  inflating: /workspace/components/admin/ImageUploader.tsx
  inflating: /workspace/components/admin/Sidebar.tsx
  inflating: /workspace/components/landing/About.tsx
  inflating: /workspace/components/landing/Amenities.tsx
  inflating: /workspace/components/landing/Contact.tsx
  inflating: /workspace/components/landing/FloatingCTA.tsx
  inflating: /workspace/components/landing/Gallery.tsx
  inflating: /workspace/components/landing/Hero.tsx
  inflating: /workspace/components/landing/Rooms.tsx
  inflating: /workspace/components/landing/Testimonials.tsx
  inflating: /workspace/components/ui/Footer.tsx
  inflating: /workspace/components/ui/Navbar.tsx
  inflating: /workspace/lib/auth.ts
  inflating: /workspace/lib/blog.ts
  inflating: /workspace/lib/data.ts
  inflating: /workspace/lib/store.ts
  inflating: /workspace/lib/supabase.ts
  inflating: /workspace/lib/useImageUpload.ts
  inflating: /workspace/lib/i18n/en.ts
  inflating: /workspace/lib/i18n/LanguageContext.tsx
  inflating: /workspace/lib/i18n/vi.ts
  inflating: /workspace/supabase/config.toml
  inflating: /workspace/supabase/.temp/cli-latest
  inflating: /workspace/supabase/.temp/gotrue-version
  inflating: /workspace/supabase/.temp/pooler-url
  inflating: /workspace/supabase/.temp/postgres-version
  inflating: /workspace/supabase/.temp/project-ref
  inflating: /workspace/supabase/.temp/rest-version
  inflating: /workspace/supabase/.temp/storage-migration
  inflating: /workspace/supabase/.temp/storage-version
  inflating: /workspace/supabase/migrations/20260223201441_init.sql
  inflating: /workspace/supabase/migrations/202602232201441_init.sql
BUILD
Already have image (with digest): gcr.io/cloud-builders/docker
Sending build context to Docker daemon  648.2kB
Step 1/32 : FROM node:18-alpine AS base
18-alpine: Pulling from library/node
f18232174bc9: Pulling fs layer
dd71dde834b5: Pulling fs layer
1e5a4c89cee5: Pulling fs layer
25ff2da83641: Pulling fs layer
25ff2da83641: Download complete
f18232174bc9: Verifying Checksum
f18232174bc9: Download complete
1e5a4c89cee5: Verifying Checksum
1e5a4c89cee5: Download complete
f18232174bc9: Pull complete
dd71dde834b5: Verifying Checksum
dd71dde834b5: Download complete
dd71dde834b5: Pull complete
1e5a4c89cee5: Pull complete
25ff2da83641: Pull complete
Digest: sha256:8d6421d663b4c28fd3ebc498332f249011d118945588d0a35cb9bc4b8ca09d9e
Status: Downloaded newer image for node:18-alpine
 ---> ee77c6cd7c18
Step 2/32 : FROM base AS deps
 ---> ee77c6cd7c18
Step 3/32 : RUN apk add --no-cache libc6-compat
 ---> Running in 247d8faa5952
fetch https://dl-cdn.alpinelinux.org/alpine/v3.21/main/x86_64/APKINDEX.tar.gz
fetch https://dl-cdn.alpinelinux.org/alpine/v3.21/community/x86_64/APKINDEX.tar.gz
(1/3) Installing musl-obstack (1.2.3-r2)
(2/3) Installing libucontext (1.3.2-r0)
(3/3) Installing gcompat (1.1.0-r4)
OK: 10 MiB in 20 packages
Removing intermediate container 247d8faa5952
 ---> 8b79a15a3fe1
Step 4/32 : WORKDIR /app
 ---> Running in d96bdc0f8d5f
Removing intermediate container d96bdc0f8d5f
 ---> 53e567520a0e
Step 5/32 : COPY package.json package-lock.json* ./
 ---> ed04e0ffd61f
Step 6/32 : RUN npm ci
 ---> Running in a2b133856584
[91mnpm warn EBADENGINE Unsupported engine {
npm warn EBADENGINE   package: '@supabase/auth-js@2.97.0',
npm warn EBADENGINE   required: { node: '>=20.0.0' },
npm warn EBADENGINE   current: { node: 'v18.20.8', npm: '10.8.2' }
npm warn EBADENGINE }
[0m[91mnpm warn EBADENGINE Unsupported engine {
npm warn EBADENGINE   package: '@supabase/functions-js@2.97.0',
npm warn EBADENGINE   required: { node: '>=20.0.0' },
npm warn EBADENGINE   current: { node: 'v18.20.8', npm: '10.8.2' }
npm warn EBADENGINE }
[0m[91mnpm warn EBADENGINE Unsupported engine {
npm warn EBADENGINE   package: '@supabase/postgrest-js@2.97.0',
npm warn EBADENGINE   required: { node: '>=20.0.0' },
npm warn EBADENGINE   current: { node: 'v18.20.8', npm: '10.8.2' }
npm warn EBADENGINE }
[0m[91mnpm warn EBADENGINE Unsupported engine {
npm warn EBADENGINE   package: '@supabase/realtime-js@2.97.0',
npm warn EBADENGINE   required: { node: '>=20.0.0' },
npm warn EBADENGINE   current: { node: 'v18.20.8', npm: '10.8.2' }
npm warn EBADENGINE }
[0m[91mnpm warn EBADENGINE Unsupported engine {
npm warn EBADENGINE   package: '@supabase/storage-js@2.97.0',
npm warn EBADENGINE   required: { node: '>=20.0.0' },
npm warn EBADENGINE   current: { node: 'v18.20.8', npm: '10.8.2' }
npm warn EBADENGINE }
[0m[91mnpm warn EBADENGINE Unsupported engine {
npm warn EBADENGINE   package: '@supabase/supabase-js@2.97.0',
npm warn EBADENGINE   required: { node: '>=20.0.0' },
npm warn EBADENGINE   current: { node: 'v18.20.8', npm: '10.8.2' }
npm warn EBADENGINE }
[0m[91mnpm warn EBADENGINE Unsupported engine {
npm warn EBADENGINE   package: 'iceberg-js@0.8.1',
npm warn EBADENGINE   required: { node: '>=20.0.0' },
npm warn EBADENGINE   current: { node: 'v18.20.8', npm: '10.8.2' }
npm warn EBADENGINE }
[0m[91mnpm warn deprecated rimraf@3.0.2: Rimraf versions prior to v4 are no longer supported
[0m[91mnpm warn deprecated inflight@1.0.6: This module is not supported, and leaks memory. Do not use it. Check out lru-cache if you want a good and tested way to coalesce async requests by a key value, which is much more comprehensive and powerful.
[0m[91mnpm warn deprecated @humanwhocodes/object-schema@2.0.3: Use @eslint/object-schema instead
[0m[91mnpm warn deprecated glob@7.2.3: Old versions of glob are not supported, and contain widely publicized security vulnerabilities, which have been fixed in the current version. Please update. Support for old versions may be purchased (at exorbitant rates) by contacting i@izs.me
[0m[91mnpm warn deprecated @humanwhocodes/config-array@0.13.0: Use @eslint/config-array instead
[0m[91mnpm warn deprecated glob@10.3.10: Old versions of glob are not supported, and contain widely publicized security vulnerabilities, which have been fixed in the current version. Please update. Support for old versions may be purchased (at exorbitant rates) by contacting i@izs.me
[0m[91mnpm warn deprecated eslint@8.57.1: This version is no longer supported. Please see https://eslint.org/version-support for other options.
[0m[91mnpm warn deprecated next@14.2.5: This version has a security vulnerability. Please upgrade to a patched version. See https://nextjs.org/blog/security-update-2025-12-11 for more details.
[0m
added 403 packages, and audited 404 packages in 58s
149 packages are looking for funding
  run `npm fund` for details
16 vulnerabilities (15 high, 1 critical)
To address issues that do not require attention, run:
  npm audit fix
To address all issues (including breaking changes), run:
  npm audit fix --force
Run `npm audit` for details.
[91mnpm notice
npm notice New major version of npm available! 10.8.2 -> 11.10.1
npm notice Changelog: https://github.com/npm/cli/releases/tag/v11.10.1
npm notice To update run: npm install -g npm@11.10.1
npm notice
[0mRemoving intermediate container a2b133856584
 ---> 746182617140
Step 7/32 : FROM base AS builder
 ---> ee77c6cd7c18
Step 8/32 : WORKDIR /app
 ---> Running in 7b3cbcbf78ea
Removing intermediate container 7b3cbcbf78ea
 ---> 6d2be67198bd
Step 9/32 : COPY --from=deps /app/node_modules ./node_modules
 ---> 1d6824f3b434
Step 10/32 : COPY . .
 ---> 9b6d9fd18450
Step 11/32 : ARG NEXT_PUBLIC_SUPABASE_URL
 ---> Running in aa5c05f6b112
Removing intermediate container aa5c05f6b112
 ---> 48b725e0b8b1
Step 12/32 : ARG NEXT_PUBLIC_SUPABASE_ANON_KEY
 ---> Running in 717fbca63af7
Removing intermediate container 717fbca63af7
 ---> ba87fd93d1f7
Step 13/32 : ENV NEXT_PUBLIC_SUPABASE_URL=$NEXT_PUBLIC_SUPABASE_URL
 ---> Running in 90ed96186b56
Removing intermediate container 90ed96186b56
 ---> 40e8dffea41b
Step 14/32 : ENV NEXT_PUBLIC_SUPABASE_ANON_KEY=$NEXT_PUBLIC_SUPABASE_ANON_KEY
 ---> Running in df1d129a10b5
Removing intermediate container df1d129a10b5
 ---> 6b994fe57a29
Step 15/32 : ENV NEXT_TELEMETRY_DISABLED=1
 ---> Running in 0605f8a216a9
Removing intermediate container 0605f8a216a9
 ---> fb660fb06acd
Step 16/32 : RUN npm run build
 ---> Running in 12273e049220
> ta-giang-ecolog@0.1.0 build
> next build
  ? Next.js 14.2.5
  - Environments: .env.production
   Creating an optimized production build ...
 ? Compiled successfully
   Linting and checking validity of types ...
   Collecting page data ...
[91m[Auth] C?NH B?O: Bi?n m?i tr??ng ADMIN_USERNAME ch?a ???c ??t!
[0m[91m[Auth] C?NH B?O: Bi?n m?i tr??ng ADMIN_PASSWORD ch?a ???c ??t!
[0m[91m[Auth] C?NH B?O: Bi?n m?i tr??ng SESSION_SECRET ch?a ???c ??t!
[0m[91m??  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217
[0m[91mError: supabaseUrl is required.
    at /app/.next/server/chunks/857.js:37:48129
    at new rg (/app/.next/server/chunks/857.js:37:48380)
    at ry (/app/.next/server/chunks/857.js:37:52119)
    at 1872 (/app/.next/server/app/api/site-data/route.js:1:511)
    at t (/app/.next/server/webpack-runtime.js:1:127)
    at s (/app/.next/server/app/api/site-data/route.js:1:1769)
    at /app/.next/server/app/api/site-data/route.js:1:1804
    at t.X (/app/.next/server/webpack-runtime.js:1:1191)
    at /app/.next/server/app/api/site-data/route.js:1:1782
    at Object.<anonymous> (/app/.next/server/app/api/site-data/route.js:1:1831)
[0m[91m
[0m[91m> Build error occurred
[0m[91mError: Failed to collect page data for /api/site-data
    at /app/node_modules/next/dist/build/utils.js:1268:15
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5) {
  type: 'Error'
}
[0m[91mnpm notice
npm notice New major version of npm available! 10.8.2 -> 11.10.1
npm notice Changelog: https://github.com/npm/cli/releases/tag/v11.10.1
npm notice To update run: npm install -g npm@11.10.1
npm notice
The command '/bin/sh -c npm run build' returned a non-zero code: 1
ERROR
ERROR: build step 0 "gcr.io/cloud-builders/docker" failed: step exited with non-zero status: 1
[0m
--------------------------------------------------------------------------------
